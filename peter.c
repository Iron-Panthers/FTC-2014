#pragma config(Hubs,  S1, HTMotor,  HTServo,  none,     none)
#pragma config(Sensor, S2,     ir,             sensorI2CCustom)
#pragma config(Motor,  motorA,           ,             tmotorNXT, openLoop, encoder)
#pragma config(Motor,  mtr_S1_C1_1,     motorD,        tmotorTetrix, openLoop)
#pragma config(Motor,  mtr_S1_C1_2,     motorE,        tmotorTetrix, openLoop)
#pragma config(Servo,  srvo_S1_C2_1,    servo1,               tServoNone)
#pragma config(Servo,  srvo_S1_C2_2,    servo2,               tServoNone)
#pragma config(Servo,  srvo_S1_C2_3,    servo3,               tServoNone)
#pragma config(Servo,  srvo_S1_C2_4,    servo4,               tServoNone)
#pragma config(Servo,  srvo_S1_C2_5,    servo5,               tServoNone)
#pragma config(Servo,  srvo_S1_C2_6,    servo6,               tServoNone)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

#include "hitechnic-irseeker-v2.h"

task main ()
{
	int _dirAC = 0;
	int acS1, acS2, acS3, acS4, acS5 = 0;
	tHTIRS2DSPMode _mode = DSP_1200;
	if (HTIRS2setDSPMode(ir, _mode) == 0)
    {
        PlaySound(soundBeepBeep);
        return;
    }
    int maxSig = 0;
    int val = 0;

    while(true)
    {
        _dirAC = HTIRS2readACDir(ir);
        if (HTIRS2readAllACStrength(ir, acS1, acS2, acS3, acS4, acS5 ))
        {
            maxSig = (acS1 > acS2) ? acS1 : acS2;
            maxSig = (maxSig > acS3) ? maxSig : acS3;
            maxSig = (maxSig > acS4) ? maxSig : acS4;
            maxSig = (maxSig > acS5) ? maxSig : acS5;
        }
        val = _dirAC - 5;
        motor[motorA] = 50 * maxSig;
        wait10Msec(2);
    }
}
